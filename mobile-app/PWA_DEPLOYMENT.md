# Progressive Web App (PWA) Deployment Guide

## Overview

Doc Time is now configured as a Progressive Web App (PWA), which means users can install it directly from their web browser on any device (desktop, tablet, mobile) without going through app stores.

## Features

- ✅ **Installable**: Users can "Add to Home Screen" on any device
- ✅ **Offline Support**: Service worker caches assets for offline use
- ✅ **App-like Experience**: Standalone display mode (no browser UI)
- ✅ **Cross-Platform**: Works on Android, iOS, Windows, macOS, Linux
- ✅ **No App Store**: Direct installation from web browser

## Building the PWA

### Local Development

1. **Start the development server:**
   ```bash
   cd /Users/maria/doc-time/mobile-app
   npm start
   ```
   Then press `w` to open in web browser, or visit `http://localhost:8081`

2. **Test PWA features:**
   - Open Chrome DevTools → Application → Manifest (verify manifest)
   - Check Service Worker registration
   - Test "Add to Home Screen" prompt

### Production Build

1. **Build static files:**
   ```bash
   cd /Users/maria/doc-time/mobile-app
   npm run build:web
   ```
   This creates a `web-build/` directory with all static files.

2. **Deploy to hosting:**
   - Upload the `web-build/` folder contents to your web server
   - Ensure HTTPS is enabled (required for PWA)
   - Configure server to serve `index.html` for all routes (SPA routing)

### Using EAS Build (Cloud)

1. **Build for web:**
   ```bash
   cd /Users/maria/doc-time/mobile-app
   eas build --profile web --platform web
   ```

2. **Deploy the build:**
   - Download the build artifacts
   - Upload to your web hosting (Netlify, Vercel, AWS S3, etc.)

## Deployment Options

### Option 1: Netlify (Recommended - Free)

1. **Install Netlify CLI:**
   ```bash
   npm install -g netlify-cli
   ```

2. **Deploy:**
   ```bash
   cd /Users/maria/doc-time/mobile-app
   npm run build:web
   netlify deploy --prod --dir=web-build
   ```

3. **Configure redirects:**
   Create `web-build/_redirects`:
   ```
   /*    /index.html   200
   ```

### Option 2: Vercel

1. **Install Vercel CLI:**
   ```bash
   npm install -g vercel
   ```

2. **Deploy:**
   ```bash
   cd /Users/maria/doc-time/mobile-app
   npm run build:web
   vercel --prod
   ```

### Option 3: AWS S3 + CloudFront

1. **Build:**
   ```bash
   npm run build:web
   ```

2. **Upload to S3:**
   ```bash
   aws s3 sync web-build/ s3://your-bucket-name --delete
   ```

3. **Configure CloudFront** to serve `index.html` for all routes

### Option 4: Traditional Web Hosting

1. **Build:**
   ```bash
   npm run build:web
   ```

2. **Upload** all files from `web-build/` to your web server's public directory

3. **Configure** your server to:
   - Serve files over HTTPS
   - Redirect all routes to `index.html` (for React Navigation)

## PWA Configuration

The PWA is configured in `app.config.js` with:

- **Name**: Doc Time
- **Short Name**: DocTime
- **Theme Color**: #4ECDC4 (Cyan)
- **Background Color**: #F8F9FA (Light gray)
- **Display Mode**: Standalone (no browser UI)
- **Orientation**: Portrait
- **Icons**: Multiple sizes (96px to 512px)

## User Installation

### On Android (Chrome)

1. Visit the PWA URL
2. Tap the menu (⋮) → "Add to Home screen"
3. Tap "Add"
4. The app icon appears on home screen

### On iOS (Safari)

1. Visit the PWA URL
2. Tap the Share button (□↑)
3. Tap "Add to Home Screen"
4. Tap "Add"
5. The app icon appears on home screen

### On Desktop (Chrome/Edge)

1. Visit the PWA URL
2. Click the install icon in the address bar
3. Click "Install"
4. The app opens in a standalone window

## Requirements

- ✅ **HTTPS**: Required for PWA (service workers only work over HTTPS)
- ✅ **Manifest**: Configured in `app.config.js`
- ✅ **Service Worker**: Auto-generated by Expo
- ✅ **Icons**: Multiple sizes provided

## Testing

1. **Chrome DevTools:**
   - Application → Manifest (check for errors)
   - Application → Service Workers (verify registration)
   - Lighthouse → Run PWA audit

2. **Mobile Testing:**
   - Use Chrome on Android
   - Use Safari on iOS
   - Test "Add to Home Screen" functionality

## Troubleshooting

### PWA not installable?

- Check HTTPS is enabled
- Verify manifest.json is accessible
- Check service worker is registered
- Ensure icons are valid

### Service Worker not working?

- Clear browser cache
- Check HTTPS requirement
- Verify service worker file exists

### Routing issues?

- Configure server to serve `index.html` for all routes
- Check `_redirects` file (Netlify) or `vercel.json` (Vercel)

## Current API Configuration

The PWA uses the same API configuration as the mobile app:
- **API Base URL**: `https://homiest-psychopharmacologic-anaya.ngrok-free.dev`
- Configured in `app.config.js` via `extra.apiBaseUrl`

## Next Steps

1. Build the PWA: `npm run build:web`
2. Deploy to hosting (Netlify/Vercel recommended)
3. Share the URL with users
4. Users can install directly from browser!

